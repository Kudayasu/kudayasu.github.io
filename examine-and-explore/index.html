<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Examine &amp; Explore - Kudayasu</title><meta name="description" content="A brief list and synopsis of each finding Xbox Live API — Pulling at Low-Hanging Fruit SSH — Mishaps of Visual Studio Deployment XVDP — Xbox Virtual Disk (Patch) UWP Application Mounts — R/W Devmode Gifting — Membership Stacking &amp; Corruption Xbox Live API —&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="./../examine-and-explore/"><link rel="shortcut icon" href="./../media/website/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="./../assets/css/style.css?v=fd3cab2751cf3d9a9c42ea0bcbee3784"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"./../examine-and-explore/"},"headline":"Examine & Explore","datePublished":"2023-07-26T12:06","dateModified":"2023-07-26T18:14","description":"A brief list and synopsis of each finding Xbox Live API — Pulling at Low-Hanging Fruit SSH — Mishaps of Visual Studio Deployment XVDP — Xbox Virtual Disk (Patch) UWP Application Mounts — R/W Devmode Gifting — Membership Stacking &amp; Corruption Xbox Live API —&hellip;","author":{"@type":"Person","name":"Kuda","url":"./../authors/test/"},"publisher":{"@type":"Organization","name":"Kuda"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><meta name="google-site-verification" content="6IjN4HwjoThoXT__RfLTmIRps6NrVqwLPY4HvDnT8v4"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="./../">Kudayasu</a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="./../assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="./../media/website/12-wdIJml9.jpg" srcset="./../media/website/responsive/12-wdIJml9-xs.jpg 300w, ./../media/website/responsive/12-wdIJml9-sm.jpg 480w, ./../media/website/responsive/12-wdIJml9-md.jpg 768w, ./../media/website/responsive/12-wdIJml9-lg.jpg 1024w, ./../media/website/responsive/12-wdIJml9-xl.jpg 1360w, ./../media/website/responsive/12-wdIJml9-2xl.jpg 1600w" sizes="100vw" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><h1>Examine &amp; Explore</h1></div></header></div><div class="wrapper post__entry"><h1 id="ff48" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">A brief list and synopsis of each finding</h1><ol><li id="0d5d" class="vc vd qo km b ve vf vg vh vi vj vk vl vm vn vo vp vq vr vs vt vu vv vw vx vy vz wa wb bj" data-selectable-paragraph="">Xbox Live API — Pulling at Low-Hanging Fruit</li><li id="5ac8" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy vz wa wb bj" data-selectable-paragraph="">SSH — Mishaps of Visual Studio Deployment</li><li id="736e" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy vz wa wb bj" data-selectable-paragraph="">XVDP — Xbox Virtual Disk (Patch)</li><li id="8e34" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy vz wa wb bj" data-selectable-paragraph="">UWP Application Mounts — R/W</li><li id="09fa" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy vz wa wb bj" data-selectable-paragraph="">Devmode Gifting — Membership Stacking &amp; Corruption</li></ol><h1 id="d0c6" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">Xbox Live API — Pulling at Low-Hanging Fruit</h1><p id="9142" class="pw-post-body-paragraph vc vd qo km b ve vf vg vh vi vj vk vl jw vn vo vp kb vr vs vt kg vv vw vx vy em bj" data-selectable-paragraph="">The Xbox Live API spans <a href="https://crt.sh/?q=%25.xboxlive.com">many</a> sub-domains, but in this case we’ll be focusing on a few endpoints in particular:</p><pre id="b5d0" class="vc vd wk km b ve wl vg vh vi wm vk vl vm wn vo vp vq wo vs vt vu wp vw vx vy em bj"><code><em class="qo">profile.xboxlive.com, achievements.xboxlive.com, gamerpics.xboxlive.com</em></code></pre><p id="6664" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">First, addressing the profile domain, we have a few paths that we can poke at:</p><ul><li id="d8c7" class="vc vd qo km b ve wl vg vh vi wm vk vl vm wn vo vp vq wo vs vt vu wp vw vx vy wq wa wb bj" data-selectable-paragraph="">/profile/settings/Gamerscore</li><li id="a5f8" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy wq wa wb bj" data-selectable-paragraph="">/profile/settings/PreferredColor</li><li id="acc6" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy wq wa wb bj" data-selectable-paragraph="">/profile/settings/ShowUserAsAvatar</li></ul><p>Prior to the patch, it was possible to intercept any legitimate profile-settings POST request by performing <a href="https://docs.telerik.com/fiddler/configure-fiddler/tasks/configurefiddlerforwin8">MITM</a>, modifying the userSetting to any valid value within the URL path (e.g., Gamerscore), matching the body request userSetting, setting the value to any valid integer, and your Gamerscore would update in real-time.</p><p>The PreferredColor path lets you set custom colors by posting a link to the corresponding JSON based on the primaryColor. For example: <a href="https://dlassets-ssl.xboxlive.com/public/content/ppl/colors/00000.json"></a><a href="https://dlassets-ssl.xboxlive.com/public/content/ppl/colors/00000.json">https://dlassets-ssl.xboxlive.com/public/content/ppl/colors/00000.json</a>. With this in mind, you can intercept the request and post your custom colors to any valid URL, such as: <a href="https://pastebin.com/raw/eMs8kL4S">https://pastebin.com/raw/eMs8kL4S</a>.</p><p>These colors will appear on your end, but not for others, since the code-base expects to retrieve colors from their domain. If it doesn’t, it’ll default to green for everyone else.</p><p data-selectable-paragraph=""><img loading="lazy" src="https://i.imgur.com/xxze0sG.png" data-is-external-image="true"></p><p id="48e8" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">As for <strong class="km jl">ShowUserAsAvatar</strong>, this one was useful for the sole purpose of custom gamerpics. Within the avatar editor app, particularly the original one, you're able to take a picture of your avatar. You could simply then intercept that request, and swap in your own 1080x1080 PNG — Fiddler makes this very easy to do using the <a href="https://www.telerik.com/blogs/how-to-compose-https-requests-with-fiddler">Composer</a> tool. The newer version of the avatar editor retains the same functionality, and you can perform a similar sequence for the <a href="xblcustompicassets3002.blob.core.windows.net">xblcustompicassets3002</a> domain.</p><ol><li>Drag the stock request into the Composer</li><li>Use the "Upload file..." button to select any image</li><li>Issue the request</li><li>Reissue the <strong>PUT</strong> request from mediahub</li></ol><p data-selectable-paragraph="">The main caveat with this sequence is that you seem to get <span style="text-decoration: underline;"><em>one</em></span> use out of the manual upload. As far as I can tell, this works by abusing the "processing window" that's taking place on the backend, given that it has to happen relatively soon after the initial-legitimate request is sent.</p><p class="msg msg--info"><strong>Note</strong>: The mediahub PUT request <em>will</em> return 400, but the gamerpic change still occurs.</p><p id="7baa" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">Regarding the <strong>A</strong><strong class="km jl">chievements</strong> domain, you can intercept any achievement unlock request, and swap in the ID for any other (typically just integers 0–100). The stipulation with this is that you’re restricted to the title token, so in this case, the <a href="https://learn.microsoft.com/en-us/gaming/gdk/_content/gc/live/features/s2s-auth-calls/service-authentication/security-tokens/live-token-claims">XTI</a> parameter that’s assigned within the token. Tread carefully.</p><h1 id="1947" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">SSH — Mishaps of Visual Studio Deployment</h1><p id="bee6" class="pw-post-body-paragraph vc vd qo km b ve vf vg vh vi vj vk vl jw vn vo vp kb vr vs vt kg vv vw vx vy em bj" data-selectable-paragraph=""><a href="https://learn.microsoft.com/en-us/windows/uwp/xbox-apps/devkit-activation">Devmode</a> application deployment via Visual Studio utilizes SSH and requires a pairing pin for Visual Studio. The pairing pin can coincidentally be used as a password to <a href="https://github.com/MicrosoftDocs/windows-dev-docs/blob/docs/hub/apps/get-started/developer-mode-features-and-debugging.md#ssh">SSH</a> into the Xbox. Using something like PuTTY will work just fine for this.</p><p id="f718" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">Once you have this essential shell active, you can further your reach with the help of Junctions/Symlinks. Although the privs are quite constrained, you’re at least outside of the typical AppContainer. Utilizing any location not locked down by the XRO mini-filter, you can simply run mklink with the /J switch (allowed at this level of privs), and you’re able to freely explore every SRA partition.</p><h1 id="da84" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">XVDP — Diving Into the Treasure-Trove of T:\</h1><p id="a3f3" class="pw-post-body-paragraph vc vd qo km b ve vf vg vh vi vj vk vl jw vn vo vp kb vr vs vt kg vv vw vx vy em bj" data-selectable-paragraph="">Upon performing a system update, Xbox Virtual Disk (Patch) files used to be exposed to the Temporary partition (T:\), under a mount point with two A/B subfolders. The first mount point would contain the actual contents of updater.xvd itself, and the second would contain each of the patch files respectively.</p><p id="bd25" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">These mount points and its files are still easily accessible through the mountvol utility. You can either assign said mount point to an open volume-letter, or create a symlink to its volume id. Notably, since both are mounted R/O, you'll have to get creative if you wish to subvert these or their contents.</p><p id="9ca4" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">If you wish to poke at the files yourself, eratools.xvdp will be the most fruitful, and extracting its contents is made easy with tools like <a href="https://github.com/ReFirmLabs/binwalk">binwalk</a> or <a href="https://github.com/onekey-sec/unblob">unblob</a>.</p><h1 id="8d6a" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">UWP Apps — Leaving the R/W Door Open</h1><p id="b428" class="pw-post-body-paragraph vc vd qo km b ve vf vg vh vi vj vk vl jw vn vo vp kb vr vs vt kg vv vw vx vy em bj" data-selectable-paragraph="">Universal Windows Platform applications used to be easily accessible through the now <a class="af mw" href="https://twitter.com/xboxinsider/status/1202357755140546560" rel="noopener ugc nofollow" target="_blank"><strong class="km jl">disabled</strong></a> File Explorer, and with the help of <a class="af mw" href="https://github.com/Xenomega/xsymlink" rel="noopener ugc nofollow" target="_blank"><strong class="km jl">symbolic link exploitation</strong></a> on a removable USB.</p><p id="bf32" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">With this, you could utilize any sort of File Explorer app to browse through volumes 0–100, and eventually find the mount point for your active application. <a href="https://apps.microsoft.com/store/detail/filesfolders-pro/9WZDNCRFJB34">Files &amp; Folders</a> in particular made this a breeze as it would resolve the sub-folder count for each volume. Since these applications were mounted R/W, you were able to completely change its contents, however you would need to have it reprovisioned. Performing a factory reset was a common way to accomplish this.</p><p data-selectable-paragraph="">This exploration also extended to XVC applications as well, such as Dev Mode Activation, but was inconsistent in terms of dumping its contents.</p><h1 id="7426" class="ug uh qo be ui uj uk ul jq um un uo jv up uq ur us ut uu uv uw ux uy uz va vb bj" data-selectable-paragraph="">Devmode Gifting — Membership Stacking &amp; Corruption</h1><p id="ae93" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">Starting out, lets take a quick peek at what differentiates the response from a normal <a class="af mw" href="https://docs.microsoft.com/en-us/windows/uwp/xbox-apps/frequently-asked-questions" rel="noopener ugc nofollow" target="_blank"><strong class="km jl">RETAIL</strong></a> call:</p><pre class="ws wt wu wv ww xe xf xg xh ax xi bj"><span id="a60b" class="xj uh qo xf b ep xk xl l xm xn" data-selectable-paragraph="">"Conditions": {<br>              "$type": "Microsoft.Marketplace.Storefront.Contracts.V3.AvailabilityConditions, Microsoft.Marketplace.Storefront.Contracts",<br>              "EndDate": "9999-11-30 23:59:59Z",<br>              "StartDate": "2019-07-03 11:00:00Z",<br>              "ResourceSetIds": [<br>                "XDKS.1"<br>              ]</span></pre><p id="6bd3" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">Prior to the “patch” of removing the gift-button on the membership page, the <strong class="km jl">ResourceSetId </strong>came back to the following value: <em class="wk">“NONRETAIL”</em> . As you can see, they’ve changed it to XDKS.1, essentially ending up with the same result for differentiating between the two.</p><p id="d394" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">As a result, when one redeemed this conflicting alternate SKU membership, whether through the store or through a gifted message from the Xbox Live Service profile, it would “merge” or overlap with your RETAIL membership, effectively corrupting your existing membership, disallowing any legitimate RETAIL-SKU redemption attempts as the stack conflicted.</p><p id="0fc7" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">The major issue with this overlap is not only the fact that your membership would effectively be “bricked”, but also the gifting availability. Since the membership was free to redeem with this specific SKU, you could essentially send as many as the API would allow (within the bounds of rate-limiting), trivially phish anyone, cause general havoc, etc.</p><p class="msg msg--info">Alongside this, paired with a certain inbox application and its capabilities, one could achieve <a href="https://web.archive.org/web/20230530183048/https://titleos.dev/xploring-xbox/" target="_blank" rel="nofollow ugc noopener noreferrer"><strong class="km jl">RCE</strong></a>, thus making the gift masquerade as the Xbox Live Service profile extremely powerful.</p><p id="f45b" class="pw-post-body-paragraph vc vd qo km b ve wl vg vh vi wm vk vl jw wn vo vp kb wo vs vt kg wp vw vx vy em bj" data-selectable-paragraph="">You effectively have two ways of resolving this conflict:</p><ol><li id="1a43" class="vc vd qo km b ve wl vg vh vi wm vk vl vm wn vo vp vq wo vs vt vu wp vw vx vy vz wa wb bj" data-selectable-paragraph="">Contacting support to reset your membership.</li><li id="2ff3" class="vc vd qo km b ve wc vg vh vi wd vk vl vm we vo vp vq wf vs vt vu wg vw vx vy vz wa wb bj" data-selectable-paragraph="">Waiting out the duration of the <span style="text-decoration: underline;">NONRETAIL</span> sku to expire.</li></ol><p class="msg msg--info">It's worth pointing out that while it's problematic if you have an <span style="text-decoration: underline;">existing</span> membership, it is <em>quite the opposite</em> if you do not.</p></div><footer class="wrapper post__footer"><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="./../assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="./../modifying-mercurys-manifest/" class="post__nav-link" rel="prev"><span>Previous</span> Modifying Mercury’s Manifest</a></div></div></nav></main><footer class="footer"><div class="footer__social"><a href="https://github.com/Kudayasu" aria-label="Facebook"><svg><use xlink:href="./../assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/Kudayasu" aria-label="Twitter"><svg><use xlink:href="./../assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://soundcloud.com/kudayasu" aria-label="Instagram"><svg><use xlink:href="./../assets/svg/svg-map.svg#instagram"/></svg></a></div><div class="footer__copyright"><h5>死</h5></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="./../assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="./../assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>